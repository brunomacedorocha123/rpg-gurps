<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criar Personagem - GURPS Tool</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&family=Cinzel:wght@400;700&family=Uncial+Antiqua&display=swap" rel="stylesheet">
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --primary-dark: #1a1200;
    --secondary-dark: #2c2008;
    --primary-gold: #d4af37;
    --secondary-gold: #f4d03f;
    --accent-red: #8b0000;
    --accent-green: #2e5c3a;
    --text-light: #f5f5dc;
    --text-gold: #ffd700;
    --parchment: #f7f3e9;
    --wood-dark: #5d4037;
    --wood-light: #8d6e63;
    --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}

body {
    font-family: 'Cinzel', serif;
    background-color: var(--primary-dark);
    background-image: 
        radial-gradient(circle at 10% 20%, rgba(44, 32, 8, 0.5) 0%, transparent 20%),
        radial-gradient(circle at 90% 80%, rgba(42, 21, 11, 0.5) 0%, transparent 20%);
    color: var(--text-light);
    min-height: 100vh;
    position: relative;
}

body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        url('data:image/svg+xml;utf8,<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M0,0 L100,0 L100,100 L0,100 Z" fill="none" stroke="%232c2008" stroke-width="0.5"/></svg>'),
        linear-gradient(0deg, transparent 24%, rgba(212, 175, 55, 0.05) 25%, rgba(212, 175, 55, 0.05) 26%, transparent 27%, transparent 74%, rgba(212, 175, 55, 0.05) 75%, rgba(212, 175, 55, 0.05) 76%, transparent 77%, transparent);
    background-size: 50px 50px, 10px 10px;
    opacity: 0.3;
    z-index: -1;
}

/* HEADER COM BOTÃO SALVAR */
.header {
    background: linear-gradient(145deg, rgba(44, 32, 8, 0.95), rgba(26, 18, 0, 0.95));
    border-bottom: 3px solid var(--primary-gold);
    padding: 15px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 15px;
}

.logo {
    display: flex;
    align-items: center;
    gap: 12px;
}

.logo h1 {
    font-family: 'Uncial Antiqua', cursive;
    font-size: 1.8rem;
    color: var(--text-gold);
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    white-space: nowrap;
}

.header-actions {
    display: flex;
    align-items: center;
    gap: 20px;
    flex-wrap: wrap;
    justify-content: flex-end;
}

.user-info {
    display: flex;
    align-items: center;
    gap: 15px;
    flex-wrap: wrap;
}

.user-id {
    background: rgba(212, 175, 55, 0.2);
    padding: 8px 15px;
    border-radius: 8px;
    border: 2px solid var(--primary-gold);
    color: var(--text-gold);
    font-weight: bold;
    display: flex;
    align-items: center;
    gap: 8px;
    white-space: nowrap;
}

.player-code {
    font-size: 1.1rem;
    color: var(--secondary-gold);
    font-weight: bold;
    letter-spacing: 1px;
}

/* BREADCRUMB */
.breadcrumb {
    background: rgba(212, 175, 55, 0.1);
    padding: 10px 20px;
    border-bottom: 1px solid rgba(212, 175, 55, 0.3);
    display: flex;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
}

.breadcrumb a {
    color: var(--secondary-gold);
    text-decoration: none;
    transition: color 0.3s;
}

.breadcrumb a:hover {
    color: var(--text-gold);
    text-decoration: underline;
}

.breadcrumb .separator {
    color: var(--primary-gold);
}

.breadcrumb .current {
    color: var(--text-light);
    font-weight: bold;
}

/* PAGE HEADER */
.page-header {
    text-align: center;
    padding: 20px 20px;
    background: linear-gradient(rgba(26, 18, 0, 0.9), rgba(44, 32, 8, 0.9));
    border-bottom: 2px solid var(--primary-gold);
    position: relative;
}

.page-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, transparent, var(--primary-gold), transparent);
}

.page-header h2 {
    font-family: 'Uncial Antiqua', cursive;
    font-size: 2.2rem;
    color: var(--text-gold);
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    margin-bottom: 15px;
}

/* CHARACTER NAME INPUT */
.character-name-container {
    max-width: 800px;
    margin: 0 auto 20px;
    padding: 0 20px;
}

.character-name-input {
    width: 100%;
    padding: 15px 20px;
    font-family: 'Cinzel', serif;
    font-size: 1.3rem;
    background: rgba(212, 175, 55, 0.1);
    border: 2px solid var(--primary-gold);
    border-radius: 8px;
    color: var(--text-gold);
    text-align: center;
    outline: none;
    transition: all 0.3s ease;
}

.character-name-input:focus {
    background: rgba(212, 175, 55, 0.15);
    border-color: var(--secondary-gold);
    box-shadow: 0 0 15px rgba(212, 175, 55, 0.3);
}

.character-name-input::placeholder {
    color: rgba(212, 175, 55, 0.5);
    font-style: italic;
}

/* TABS CONTAINER - SEM BORDA LIMITANTE */
.tabs-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 15px 30px;
}

/* TABS NAVIGATION - COM MAIS ESPAÇO */
.tabs-nav {
    display: flex;
    overflow-x: auto;
    background: rgba(44, 32, 8, 0.9);
    border: 2px solid var(--primary-gold);
    border-radius: 10px 10px 0 0;
    margin-bottom: 0;
    scrollbar-width: thin;
    scrollbar-color: var(--primary-gold) var(--secondary-dark);
    padding: 8px 5px;
    gap: 2px;
}

.tabs-nav::-webkit-scrollbar {
    height: 8px;
}

.tabs-nav::-webkit-scrollbar-track {
    background: var(--secondary-dark);
    border-radius: 4px;
}

.tabs-nav::-webkit-scrollbar-thumb {
    background: var(--primary-gold);
    border-radius: 4px;
}

.tab-btn {
    padding: 15px 20px;
    background: transparent;
    border: none;
    color: var(--text-light);
    font-family: 'Cinzel', serif;
    font-size: 1rem;
    font-weight: bold;
    cursor: pointer;
    white-space: nowrap;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: all 0.3s ease;
    min-width: 150px;
    justify-content: center;
    border-radius: 6px;
    margin: 0 2px;
}

.tab-btn:hover {
    background: rgba(212, 175, 55, 0.15);
    color: var(--secondary-gold);
}

.tab-btn.active {
    background: rgba(212, 175, 55, 0.25);
    color: var(--text-gold);
    border-bottom: 3px solid var(--secondary-gold);
}

/* TABS CONTENT - SEM BORDA LIMITANTE, MAIS ESPAÇO */
.tabs-content {
    background: rgba(44, 32, 8, 0.7);
    padding: 30px;
    min-height: 500px;
    position: relative;
    overflow-y: auto;
    max-height: 65vh;
    border-radius: 0 0 10px 10px;
}

.tab-pane {
    display: none;
    animation: fadeIn 0.5s ease;
}

.tab-pane.active {
    display: block;
}

.tab-title {
    color: var(--text-gold);
    font-family: 'MedievalSharp', cursive;
    font-size: 1.8rem;
    margin-bottom: 25px;
    text-align: center;
    border-bottom: 2px solid rgba(212, 175, 55, 0.3);
    padding-bottom: 10px;
}

.tab-placeholder {
    text-align: center;
    padding: 80px 20px;
    color: var(--text-light);
    opacity: 0.7;
    font-size: 1.1rem;
    line-height: 1.6;
}

.tab-placeholder i {
    font-size: 3.5rem;
    color: var(--secondary-gold);
    margin-bottom: 25px;
    display: block;
}

/* NAVIGATION BUTTONS - SOMENTE ANTERIOR/PRÓXIMO */
.navigation-buttons {
    display: flex;
    justify-content: space-between;
    max-width: 1400px;
    margin: 20px auto 30px;
    padding: 0 15px;
    gap: 20px;
}

/* BUTTONS */
.btn {
    padding: 12px 30px;
    font-family: 'Cinzel', serif;
    font-size: 1.1rem;
    font-weight: bold;
    text-decoration: none;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
    position: relative;
    z-index: 1;
}

.btn-primary {
    background: linear-gradient(145deg, var(--primary-gold), #b8941f);
    color: var(--primary-dark);
    border: 2px solid var(--secondary-gold);
    min-width: 180px;
}

.btn-primary:hover {
    background: linear-gradient(145deg, var(--secondary-gold), var(--primary-gold));
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(212, 175, 55, 0.4);
}

.btn-secondary {
    background: linear-gradient(145deg, rgba(212, 175, 55, 0.2), rgba(139, 0, 0, 0.1));
    color: var(--text-light);
    border: 2px solid var(--wood-light);
}

.btn-secondary:hover {
    background: linear-gradient(145deg, rgba(212, 175, 55, 0.3), rgba(139, 0, 0, 0.2));
    border-color: var(--primary-gold);
}

.btn-back {
    background: linear-gradient(145deg, var(--wood-dark), #4a352b);
    color: var(--text-light);
    border: 2px solid var(--wood-light);
}

.btn-back:hover {
    background: linear-gradient(145deg, var(--wood-light), var(--wood-dark));
}

/* BOTÃO SALVAR NO HEADER */
.btn-save {
    background: linear-gradient(145deg, var(--accent-green), #1e4028);
    color: white;
    border: 2px solid #4a7c59;
    min-width: 180px;
    padding: 10px 25px;
}

.btn-save:hover {
    background: linear-gradient(145deg, #3a7c4a, #1e4028);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(46, 92, 58, 0.4);
}

.btn-logout {
    background: linear-gradient(145deg, var(--accent-red), #6b0000);
    color: var(--text-light);
    border: 2px solid #a52a2a;
    padding: 8px 20px;
}

.btn-logout:hover {
    background: linear-gradient(145deg, #9b0000, #6b0000);
    transform: translateY(-2px);
}

/* FOOTER */
.footer {
    text-align: center;
    padding: 25px 20px;
    margin-top: 30px;
    border-top: 2px solid var(--wood-dark);
    position: relative;
}

.footer::before {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 200px;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--primary-gold), transparent);
}

/* TOAST NOTIFICATION */
.toast {
    position: fixed;
    top: 20px;
    right: 20px;
    background: var(--accent-green);
    color: white;
    padding: 15px 25px;
    border-radius: 8px;
    border-left: 5px solid var(--primary-gold);
    box-shadow: var(--shadow);
    z-index: 10000;
    animation: slideIn 0.3s ease;
    font-family: 'Cinzel', serif;
    max-width: 300px;
    word-break: break-word;
    display: none;
}

.toast.error {
    background: var(--accent-red);
}

.toast.info {
    background: var(--secondary-dark);
}

/* LOADING OVERLAY */
.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 10001;
    display: none;
}

.loading-spinner {
    width: 50px;
    height: 50px;
    border: 5px solid var(--wood-light);
    border-top: 5px solid var(--primary-gold);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 20px;
}

/* ANIMATIONS */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

@keyframes slideOut {
    from { transform: translateX(0); opacity: 1; }
    to { transform: translateX(100%); opacity: 0; }
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* MOBILE RESPONSIVE */
@media (max-width: 1024px) {
    .tabs-nav {
        padding: 6px 3px;
        gap: 1px;
    }
    
    .tab-btn {
        min-width: 140px;
        padding: 12px 15px;
        font-size: 0.95rem;
        gap: 8px;
    }
    
    .tabs-content {
        padding: 25px 20px;
        min-height: 450px;
        max-height: 60vh;
    }
}

@media (max-width: 768px) {
    .header {
        flex-direction: column;
        text-align: center;
        gap: 15px;
    }
    
    .header-actions {
        flex-direction: column;
        width: 100%;
        justify-content: center;
        gap: 15px;
    }
    
    .user-info {
        flex-direction: column;
        width: 100%;
        justify-content: center;
    }
    
    .user-id {
        width: 100%;
        justify-content: center;
    }
    
    .logo h1 {
        font-size: 1.6rem;
    }
    
    .page-header h2 {
        font-size: 1.8rem;
    }
    
    .character-name-input {
        font-size: 1.1rem;
        padding: 12px 15px;
    }
    
    .tabs-nav {
        padding: 5px 2px;
        border-radius: 8px 8px 0 0;
    }
    
    .tab-btn {
        min-width: 130px;
        padding: 10px 12px;
        font-size: 0.9rem;
        gap: 6px;
    }
    
    .tabs-content {
        padding: 20px 15px;
        min-height: 400px;
        max-height: 55vh;
    }
    
    .tab-title {
        font-size: 1.5rem;
        margin-bottom: 20px;
    }
    
    .tab-placeholder {
        padding: 60px 15px;
        font-size: 1rem;
    }
    
    .navigation-buttons {
        flex-direction: column;
        align-items: center;
        gap: 15px;
    }
    
    .btn {
        width: 100%;
        max-width: 300px;
        padding: 10px 20px;
        font-size: 1rem;
    }
    
    .btn-primary, .btn-save, .btn-back {
        min-width: auto;
    }
    
    .btn-save {
        order: -1;
        margin-bottom: 10px;
    }
}

@media (max-width: 480px) {
    .page-header h2 {
        font-size: 1.6rem;
    }
    
    .character-name-input {
        font-size: 1rem;
    }
    
    .tabs-nav {
        padding: 4px 1px;
    }
    
    .tab-btn {
        min-width: 120px;
        padding: 8px 10px;
        font-size: 0.85rem;
        gap: 5px;
    }
    
    .tabs-content {
        padding: 15px 10px;
        min-height: 350px;
        max-height: 50vh;
    }
    
    .tab-title {
        font-size: 1.3rem;
    }
    
    .tab-placeholder i {
        font-size: 2.8rem;
    }
    
    .navigation-buttons {
        padding: 0 10px;
    }
    
    .breadcrumb {
        padding: 10px 15px;
        font-size: 0.85rem;
    }
    
    .header-actions {
        gap: 10px;
    }
    
    .btn-save {
        padding: 8px 15px;
        font-size: 0.95rem;
    }
}
</style>
 <link rel="stylesheet" href="style-dashboard.css">
 <link rel="stylesheet" href="style-atributos.css">
 <link rel="stylesheet" href="style-caracteristicas.css">
</head>
<body>
    <!-- LOADING OVERLAY -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <p style="color: var(--text-light); font-size: 1.2rem;">Carregando...</p>
    </div>

    <!-- TOAST NOTIFICATION -->
    <div class="toast" id="toast"></div>

    <!-- HEADER -->
   <!-- HEADER COM BOTÃO SALVAR -->
<header class="header">
    <div class="logo">
        <a href="modo-personagem.html" style="color: inherit; text-decoration: none; display: flex; align-items: center; gap: 12px;">
            <i class="fas fa-chevron-left" style="color: var(--secondary-gold);"></i>
            <i class="fas fa-user" style="color: var(--secondary-gold); font-size: 1.8rem;"></i>
            <h1>CRIAR PERSONAGEM</h1>
        </a>
    </div>
    
    <div class="header-actions">
        <div class="user-info">
            <div class="user-id">
                <i class="fas fa-id-card"></i>
                <span>Código:</span>
                <div class="player-code" id="playerCode">...</div>
            </div>
        </div>
        
        <button onclick="saveCharacter()" class="btn btn-save">
            <i class="fas fa-save"></i> Salvar Personagem
        </button>
        
        <button onclick="logout()" class="btn btn-logout">
            <i class="fas fa-sign-out-alt"></i> Sair
        </button>
    </div>
</header>

    <!-- BREADCRUMB -->
    <nav class="breadcrumb">
        <a href="index.html">
            <i class="fas fa-home"></i> Home
        </a>
        <span class="separator"><i class="fas fa-chevron-right"></i></span>
        <a href="modo-personagem.html">
            <i class="fas fa-user"></i> Modo Jogador
        </a>
        <span class="separator"><i class="fas fa-chevron-right"></i></span>
        <span class="current">
            <i class="fas fa-user-plus"></i> Criar Personagem
        </span>
    </nav>

    <!-- PAGE HEADER -->
    <section class="page-header">
        <h2>Forje Seu Herói</h2>
        <div class="character-name-container">
            <input type="text" 
                   id="characterName" 
                   class="character-name-input" 
                   placeholder="Digite o nome do seu personagem..." 
                   maxlength="50">
        </div>
    </section>

    <!-- TABS CONTAINER -->
    <div class="tabs-container">
        <!-- TABS NAVIGATION -->
        <div class="tabs-nav" id="tabsNav">
            <button class="tab-btn active" data-tab="dashboard">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </button>
            <button class="tab-btn" data-tab="atributos">
                <i class="fas fa-dumbbell"></i> Atributos
            </button>
            <button class="tab-btn" data-tab="caracteristicas">
                <i class="fas fa-user-tag"></i> Características
            </button>
            <button class="tab-btn" data-tab="vantagens">
                <i class="fas fa-balance-scale"></i> Vant/Desv
            </button>
            <button class="tab-btn" data-tab="pericias">
                <i class="fas fa-bullseye"></i> Perícias
            </button>
            <button class="tab-btn" data-tab="magias">
                <i class="fas fa-hat-wizard"></i> Magias
            </button>
            <button class="tab-btn" data-tab="combate">
                <i class="fas fa-fist-raised"></i> Combate
            </button>
            <button class="tab-btn" data-tab="equipamentos">
                <i class="fas fa-backpack"></i> Equipamentos
            </button>
            <button class="tab-btn" data-tab="resumo">
                <i class="fas fa-scroll"></i> Resumo
            </button>
        </div>

        <!-- TABS CONTENT -->
        <div class="tabs-content">
          <!-- DASHBOARD -->
<div class="tab-pane active" id="dashboard">
    <h3 class="tab-title">Dashboard - Visão Geral</h3>
    
    <div class="dashboard-completo">
        
        <!-- SEÇÃO 1: IDENTIFICAÇÃO DO PERSONAGEM -->
        <div class="dashboard-section">
            <div class="section-header">
                <i class="fas fa-user-circle"></i>
                <h4>Identificação</h4>
            </div>
            
            <div class="identificacao-container">
                <!-- FOTO DO PERSONAGEM -->
                <div class="foto-personagem">
                    <div class="foto-wrapper" id="fotoWrapper">
                        <img id="fotoPreview" class="foto-preview" src="" alt="Foto do Personagem">
                        <div class="foto-placeholder" id="fotoPlaceholder">
                            <i class="fas fa-user-circle fa-4x"></i>
                            <span>Adicionar Imagem</span>
                        </div>
                        <input type="file" id="fotoUpload" accept="image/*" class="foto-upload">
                    </div>
                    <div class="foto-acoes">
                        <button class="btn-foto" onclick="document.getElementById('fotoUpload').click()">
                            <i class="fas fa-upload"></i> Upload
                        </button>
                        <button class="btn-foto btn-remover" id="btnRemoverFoto">
                            <i class="fas fa-trash"></i> Remover
                        </button>
                    </div>
                </div>
                
                <!-- DADOS BÁSICOS -->
                <div class="dados-basicos">
                    <div class="dados-grid">
                        <div class="dado-item">
                            <label for="dashboardRaca">Raça/Espécie:</label>
                            <input type="text" id="dashboardRaca" class="dashboard-input" 
                                   placeholder="Humano, Elfo, Anão..." maxlength="30">
                        </div>
                        
                        <div class="dado-item">
                            <label for="dashboardClasse">Classe/Profissão:</label>
                            <input type="text" id="dashboardClasse" class="dashboard-input" 
                                   placeholder="Guerreiro, Mago, Ladino..." maxlength="30">
                        </div>
                        
                        <div class="dado-item">
                            <label for="dashboardNivel">Nível/Hierarquia:</label>
                            <input type="text" id="dashboardNivel" class="dashboard-input" 
                                   placeholder="Noviço, Veterano, Mestre..." maxlength="30">
                        </div>
                        
                        <div class="dado-item full-width">
                            <label for="dashboardDescricao">História do Personagem:</label>
                            <textarea id="dashboardDescricao" class="dashboard-textarea" 
                                      placeholder="Breve descrição do personagem, sua história, personalidade..."
                                      rows="3" maxlength="500"></textarea>
                            <div class="contador-caracteres">
                                <span id="contadorDescricao">0</span>/500 caracteres
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- SEÇÃO 2: CONTROLE DE PONTOS (SIMPLIFICADO) -->
        <div class="dashboard-section">
            <div class="section-header">
                <i class="fas fa-calculator"></i>
                <h4>Controle de Pontos</h4>
            </div>
            
            <div class="pontos-container">
                <div class="pontos-principais">
                    <div class="ponto-card ponto-total">
                        <div class="ponto-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="ponto-info">
                            <h5>Pontos Totais</h5>
                            <div class="ponto-value">
                                <input type="number" id="pontosTotais" class="ponto-input" 
                                       value="150" min="0" step="10">
                            </div>
                            <small>Definido pelo GM</small>
                        </div>
                    </div>
                    
                    <div class="ponto-card ponto-limite">
                        <div class="ponto-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="ponto-info">
                            <h5>Limite Desvantagens</h5>
                            <div class="ponto-value">
                                <input type="number" id="limiteDesvantagens" class="ponto-input" 
                                       value="-50" min="-200" max="0" step="5">
                            </div>
                            <small>Máximo permitido</small>
                        </div>
                    </div>
                    
                    <div class="ponto-card ponto-disponivel">
                        <div class="ponto-icon">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <div class="ponto-info">
                            <h5>Saldo Disponível</h5>
                            <div class="ponto-value" id="saldoDisponivel">150</div>
                            <small>Pontos restantes</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- SEÇÃO 3: ATRIBUTOS BÁSICOS -->
        <div class="dashboard-section">
            <div class="section-header">
                <i class="fas fa-dumbbell"></i>
                <h4>Atributos Básicos</h4>
            </div>
            
            <div class="atributos-container">
                <div class="atributo-row">
                    <div class="atributo-card">
                        <div class="atributo-header">
                            <i class="fas fa-fist-raised"></i>
                            <h5>FOR (ST)</h5>
                        </div>
                        <div class="atributo-value" id="atributoST">10</div>
                        <div class="atributo-label">Força</div>
                    </div>
                    
                    <div class="atributo-card">
                        <div class="atributo-header">
                            <i class="fas fa-running"></i>
                            <h5>DES (DX)</h5>
                        </div>
                        <div class="atributo-value" id="atributoDX">10</div>
                        <div class="atributo-label">Destreza</div>
                    </div>
                    
                    <div class="atributo-card">
                        <div class="atributo-header">
                            <i class="fas fa-brain"></i>
                            <h5>INT (IQ)</h5>
                        </div>
                        <div class="atributo-value" id="atributoIQ">10</div>
                        <div class="atributo-label">Inteligência</div>
                    </div>
                    
                    <div class="atributo-card">
                        <div class="atributo-header">
                            <i class="fas fa-heartbeat"></i>
                            <h5>VIG (HT)</h5>
                        </div>
                        <div class="atributo-value" id="atributoHT">10</div>
                        <div class="atributo-label">Vigor</div>
                    </div>
                </div>
                
                <!-- VITALIDADE -->
                <div class="vitalidade-container">
                    <div class="vitalidade-card">
                        <div class="vitalidade-header">
                            <i class="fas fa-heart"></i>
                            <h5>Pontos de Vida (PV)</h5>
                            <div class="vitalidade-controls">
                                <button class="vitalidade-btn" onclick="ajustarPV(-1)">-</button>
                                <button class="vitalidade-btn" onclick="ajustarPV(1)">+</button>
                            </div>
                        </div>
                        <div class="vitalidade-content">
                            <div class="vitalidade-value" id="valorPV">10/10</div>
                            <div class="vitalidade-bar">
                                <div class="bar-fill" id="barraPV"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="vitalidade-card">
                        <div class="vitalidade-header">
                            <i class="fas fa-tint"></i>
                            <h5>Pontos de Fadiga (PF)</h5>
                            <div class="vitalidade-controls">
                                <button class="vitalidade-btn" onclick="ajustarPF(-1)">-</button>
                                <button class="vitalidade-btn" onclick="ajustarPF(1)">+</button>
                            </div>
                        </div>
                        <div class="vitalidade-content">
                            <div class="vitalidade-value" id="valorPF">10/10</div>
                            <div class="vitalidade-bar">
                                <div class="bar-fill" id="barraPF"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- SEÇÃO 4: CARACTERÍSTICAS FINANCEIRAS -->
        <div class="dashboard-section">
            <div class="section-header">
                <i class="fas fa-coins"></i>
                <h4>Características Financeiras</h4>
            </div>
            
            <div class="financeiro-container">
                <div class="financeiro-card">
                    <div class="financeiro-icon">
                        <i class="fas fa-chess-queen"></i>
                    </div>
                    <div class="financeiro-info">
                        <h5>Nível de Riqueza</h5>
                        <div class="financeiro-value" id="nivelRiqueza">Médio</div>
                        <small>Status econômico</small>
                    </div>
                </div>
                
                <div class="financeiro-card">
                    <div class="financeiro-icon">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                    <div class="financeiro-info">
                        <h5>Saldo Disponível</h5>
                        <div class="financeiro-value" id="saldoPersonagem">$2.000</div>
                        <small>Capital líquido</small>
                    </div>
                </div>
                
                <div class="financeiro-card">
                    <div class="financeiro-icon">
                        <i class="fas fa-crown"></i>
                    </div>
                    <div class="financeiro-info">
                        <h5>Aparência</h5>
                        <div class="financeiro-value" id="nivelAparencia">Média</div>
                        <small>Impressão visual</small>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- SEÇÃO 5: RESUMO DE GASTOS DETALHADO -->
        <div class="dashboard-section">
            <div class="section-header">
                <i class="fas fa-file-invoice-dollar"></i>
                <h4>Resumo de Gastos Detalhado</h4>
            </div>
            
            <div class="resumo-container">
                <div class="resumo-grid">
                    <!-- ATRIBUTOS -->
                    <div class="resumo-card resumo-atributos">
                        <div class="resumo-header">
                            <i class="fas fa-dumbbell"></i>
                            <h5>Atributos</h5>
                        </div>
                        <div class="resumo-content">
                            <div class="resumo-value" id="gastosAtributos">0</div>
                            <div class="resumo-label">pontos</div>
                        </div>
                    </div>
                    
                    <!-- VANTAGENS -->
                    <div class="resumo-card resumo-vantagens">
                        <div class="resumo-header">
                            <i class="fas fa-star"></i>
                            <h5>Vantagens</h5>
                        </div>
                        <div class="resumo-content">
                            <div class="resumo-value" id="gastosVantagens">0</div>
                            <div class="resumo-label">pontos</div>
                        </div>
                    </div>
                    
                    <!-- DESVANTAGENS -->
                    <div class="resumo-card resumo-desvantagens">
                        <div class="resumo-header">
                            <i class="fas fa-ban"></i>
                            <h5>Desvantagens</h5>
                        </div>
                        <div class="resumo-content">
                            <div class="resumo-value" id="gastosDesvantagens">0</div>
                            <div class="resumo-label">pontos</div>
                        </div>
                    </div>
                    
                    <!-- PERÍCIAS -->
                    <div class="resumo-card resumo-pericias">
                        <div class="resumo-header">
                            <i class="fas fa-graduation-cap"></i>
                            <h5>Perícias</h5>
                        </div>
                        <div class="resumo-content">
                            <div class="resumo-value" id="gastosPericias">0</div>
                            <div class="resumo-label">pontos</div>
                        </div>
                    </div>
                    
                    <!-- MAGIAS -->
                    <div class="resumo-card resumo-magias">
                        <div class="resumo-header">
                            <i class="fas fa-hat-wizard"></i>
                            <h5>Magias</h5>
                        </div>
                        <div class="resumo-content">
                            <div class="resumo-value" id="gastosMagias">0</div>
                            <div class="resumo-label">pontos</div>
                        </div>
                    </div>
                    
                    <!-- TÉCNICAS -->
                    <div class="resumo-card resumo-tecnicas">
                        <div class="resumo-header">
                            <i class="fas fa-chess-knight"></i>
                            <h5>Técnicas</h5>
                        </div>
                        <div class="resumo-content">
                            <div class="resumo-value" id="gastosTecnicas">0</div>
                            <div class="resumo-label">pontos</div>
                        </div>
                    </div>
                    
                    <!-- PECULIARIDADES -->
                    <div class="resumo-card resumo-peculiaridades">
                        <div class="resumo-header">
                            <i class="fas fa-gem"></i>
                            <h5>Peculiaridades</h5>
                        </div>
                        <div class="resumo-content">
                            <div class="resumo-value" id="gastosPeculiaridades">0</div>
                            <div class="resumo-label">pontos</div>
                        </div>
                    </div>
                    
                    <!-- TOTAL LÍQUIDO -->
                    <div class="resumo-card total-card">
                        <div class="resumo-header">
                            <i class="fas fa-calculator"></i>
                            <h5>Total Líquido</h5>
                        </div>
                        <div class="resumo-content">
                            <div class="resumo-value" id="totalLiquido">150</div>
                            <div class="resumo-label">pontos gastos</div>
                        </div>
                    </div>
                </div>
                
                <!-- LEGENDA DOS PONTOS -->
                <div class="resumo-legenda">
                    <div class="legenda-item">
                        <span class="legenda-cor positiva"></span>
                        <span>Pontos positivos (gastos)</span>
                    </div>
                    <div class="legenda-item">
                        <span class="legenda-cor negativa"></span>
                        <span>Pontos negativos (ganhos de desvantagens)</span>
                    </div>
                    <div class="legenda-item">
                        <span class="legenda-cor saldo"></span>
                        <span>Saldo final</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- SEÇÃO 6: RESUMO RÁPIDO -->
        <div class="dashboard-section">
            <div class="section-header">
                <i class="fas fa-chart-pie"></i>
                <h4>Distribuição de Pontos</h4>
            </div>
            
            <div class="distribuicao-container">
                <div class="distribuicao-card">
                    <div class="distribuicao-header">
                        <h5>Como os pontos foram usados</h5>
                    </div>
                    <div class="distribuicao-content">
                        <div class="distribuicao-item">
                            <span class="distribuicao-label">Atributos</span>
                            <div class="distribuicao-bar">
                                <div class="distribuicao-fill" id="distribAtributos"></div>
                            </div>
                            <span class="distribuicao-valor" id="distribAtributosValor">0%</span>
                        </div>
                        <div class="distribuicao-item">
                            <span class="distribuicao-label">Vantagens</span>
                            <div class="distribuicao-bar">
                                <div class="distribuicao-fill" id="distribVantagens"></div>
                            </div>
                            <span class="distribuicao-valor" id="distribVantagensValor">0%</span>
                        </div>
                        <div class="distribuicao-item">
                            <span class="distribuicao-label">Perícias/Magias</span>
                            <div class="distribuicao-bar">
                                <div class="distribuicao-fill" id="distribPericias"></div>
                            </div>
                            <span class="distribuicao-valor" id="distribPericiasValor">0%</span>
                        </div>
                        <div class="distribuicao-item">
                            <span class="distribuicao-label">Outros</span>
                            <div class="distribuicao-bar">
                                <div class="distribuicao-fill" id="distribOutros"></div>
                            </div>
                            <span class="distribuicao-valor" id="distribOutrosValor">0%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
    </div>
</div>
            <!-- ATRIBUTOS -->
<div class="tab-pane" id="atributos">
    <div class="atributos-container">
        <!-- Controle de Pontos (Simplificado) -->
        <div class="pontos-section">
            <div class="ponto-card total">
                <div class="ponto-icon">
                    <i class="fas fa-star"></i>
                </div>
                <div class="ponto-info">
                    <h5>Pontos Gastos em Atributos</h5>
                    <div class="ponto-valor" id="pontosGastosCard">0</div>
                </div>
            </div>
        </div>

        <!-- Atributos Principais -->
        <div class="atributos-principais">
            <div class="secao-header">
                <i class="fas fa-crown"></i>
                <h2>Atributos Principais</h2>
            </div>
            
            <div class="cards-grid">
                <!-- ST -->
                <div class="atributo-card">
                    <div class="atributo-header">
                        <h3><i class="fas fa-fist-raised"></i> FORÇA (ST)</h3>
                        <div class="custo-badge" id="custoST">0</div>
                    </div>
                    <div class="atributo-valor">
                        <div class="controle">
                            <button class="btn-controle" onclick="alterarAtributo('ST', -1)">
                                <i class="fas fa-minus"></i>
                            </button>
                            <input type="text" id="ST" class="valor-input" value="10" readonly>
                            <button class="btn-controle" onclick="alterarAtributo('ST', 1)">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="custo-info">
                            <i class="fas fa-coins"></i> 10 pontos/nível
                        </div>
                    </div>
                </div>

                <!-- DX -->
                <div class="atributo-card">
                    <div class="atributo-header">
                        <h3><i class="fas fa-bolt"></i> DESTREZA (DX)</h3>
                        <div class="custo-badge" id="custoDX">0</div>
                    </div>
                    <div class="atributo-valor">
                        <div class="controle">
                            <button class="btn-controle" onclick="alterarAtributo('DX', -1)">
                                <i class="fas fa-minus"></i>
                            </button>
                            <input type="text" id="DX" class="valor-input" value="10" readonly>
                            <button class="btn-controle" onclick="alterarAtributo('DX', 1)">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="custo-info">
                            <i class="fas fa-coins"></i> 20 pontos/nível
                        </div>
                    </div>
                </div>

                <!-- IQ -->
                <div class="atributo-card">
                    <div class="atributo-header">
                        <h3><i class="fas fa-brain"></i> INTELIGÊNCIA (IQ)</h3>
                        <div class="custo-badge" id="custoIQ">0</div>
                    </div>
                    <div class="atributo-valor">
                        <div class="controle">
                            <button class="btn-controle" onclick="alterarAtributo('IQ', -1)">
                                <i class="fas fa-minus"></i>
                            </button>
                            <input type="text" id="IQ" class="valor-input" value="10" readonly>
                            <button class="btn-controle" onclick="alterarAtributo('IQ', 1)">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="custo-info">
                            <i class="fas fa-coins"></i> 20 pontos/nível
                        </div>
                    </div>
                </div>

                <!-- HT -->
                <div class="atributo-card">
                    <div class="atributo-header">
                        <h3><i class="fas fa-heartbeat"></i> VIGOR (HT)</h3>
                        <div class="custo-badge" id="custoHT">0</div>
                    </div>
                    <div class="atributo-valor">
                        <div class="controle">
                            <button class="btn-controle" onclick="alterarAtributo('HT', -1)">
                                <i class="fas fa-minus"></i>
                            </button>
                            <input type="text" id="HT" class="valor-input" value="10" readonly>
                            <button class="btn-controle" onclick="alterarAtributo('HT', 1)">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="custo-info">
                            <i class="fas fa-coins"></i> 10 pontos/nível
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Atributos Secundários -->
        <div class="atributos-secundarios">
            <div class="secao-header">
                <i class="fas fa-layer-group"></i>
                <h2>Atributos Derivados</h2>
            </div>
            
            <div class="cards-grid secundarios">
                <!-- PV -->
                <div class="derivado-card">
                    <div class="derivado-header">
                        <h3><i class="fas fa-heart"></i> PONTOS DE VIDA</h3>
                        <span class="fonte">(ST)</span>
                    </div>
                    <div class="derivado-valor">
                        <div class="base">
                            <span>Base:</span>
                            <strong id="PVBase">10</strong>
                        </div>
                        <div class="modificador">
                            <span>Modificador:</span>
                            <input type="number" id="bonusPV" class="mod-input" value="0" min="-10" max="10">
                        </div>
                        <div class="total">
                            <span>Total:</span>
                            <strong id="PVTotal">10</strong>
                        </div>
                    </div>
                </div>

                <!-- PF -->
                <div class="derivado-card">
                    <div class="derivado-header">
                        <h3><i class="fas fa-wind"></i> PONTOS DE FADIGA</h3>
                        <span class="fonte">(HT)</span>
                    </div>
                    <div class="derivado-valor">
                        <div class="base">
                            <span>Base:</span>
                            <strong id="PFBase">10</strong>
                        </div>
                        <div class="modificador">
                            <span>Modificador:</span>
                            <input type="number" id="bonusPF" class="mod-input" value="0" min="-10" max="10">
                        </div>
                        <div class="total">
                            <span>Total:</span>
                            <strong id="PFTotal">10</strong>
                        </div>
                    </div>
                </div>

                <!-- Vontade -->
                <div class="derivado-card">
                    <div class="derivado-header">
                        <h3><i class="fas fa-brain"></i> VONTADE</h3>
                        <span class="fonte">(IQ)</span>
                    </div>
                    <div class="derivado-valor">
                        <div class="base">
                            <span>Base:</span>
                            <strong id="VontadeBase">10</strong>
                        </div>
                        <div class="modificador">
                            <span>Modificador:</span>
                            <input type="number" id="bonusVontade" class="mod-input" value="0" min="-10" max="10">
                        </div>
                        <div class="total">
                            <span>Total:</span>
                            <strong id="VontadeTotal">10</strong>
                        </div>
                    </div>
                </div>

                <!-- Percepção -->
                <div class="derivado-card">
                    <div class="derivado-header">
                        <h3><i class="fas fa-eye"></i> PERCEPÇÃO</h3>
                        <span class="fonte">(IQ)</span>
                    </div>
                    <div class="derivado-valor">
                        <div class="base">
                            <span>Base:</span>
                            <strong id="PercepcaoBase">10</strong>
                        </div>
                        <div class="modificador">
                            <span>Modificador:</span>
                            <input type="number" id="bonusPercepcao" class="mod-input" value="0" min="-10" max="10">
                        </div>
                        <div class="total">
                            <span>Total:</span>
                            <strong id="PercepcaoTotal">10</strong>
                        </div>
                    </div>
                </div>

                <!-- Deslocamento -->
                <div class="derivado-card">
                    <div class="derivado-header">
                        <h3><i class="fas fa-running"></i> DESLOCAMENTO</h3>
                        <span class="fonte">(DX+HT)/4</span>
                    </div>
                    <div class="derivado-valor">
                        <div class="base">
                            <span>Base:</span>
                            <strong id="DeslocamentoBase">5.00</strong>
                        </div>
                        <div class="modificador">
                            <span>Modificador:</span>
                            <input type="number" id="bonusDeslocamento" class="mod-input" value="0" min="-5" max="5" step="0.25">
                        </div>
                        <div class="total">
                            <span>Total:</span>
                            <strong id="DeslocamentoTotal">5.00</strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sistema de Combate -->
        <div class="combate-section">
            <div class="secao-header">
                <i class="fas fa-shield-alt"></i>
                <h2>Sistema de Combate</h2>
            </div>
            
            <div class="combate-grid">
                <!-- Dano Base -->
                <div class="combate-card">
                    <div class="combate-header">
                        <h3><i class="fas fa-dagger"></i> DANO BÁSICO</h3>
                        <span class="fonte">(ST)</span>
                    </div>
                    <div class="dano-container">
                        <div class="dano-item">
                            <span class="dano-tipo">Golpe Despreparado (GDP)</span>
                            <span class="dano-valor" id="danoGDP">1d-2</span>
                        </div>
                        <div class="dano-item">
                            <span class="dano-tipo">Golpe Estático Básico (GEB)</span>
                            <span class="dano-valor" id="danoGEB">1d</span>
                        </div>
                    </div>
                </div>

                <!-- Carga -->
                <div class="combate-card">
                    <div class="combate-header">
                        <h3><i class="fas fa-weight-hanging"></i> NÍVEIS DE CARGA</h3>
                        <span class="fonte">(ST)</span>
                    </div>
                    <div class="carga-container">
                        <div class="carga-item">
                            <span class="carga-tipo">Nenhuma:</span>
                            <span class="carga-valor" id="cargaNenhuma">10.0</span>
                        </div>
                        <div class="carga-item">
                            <span class="carga-tipo">Leve:</span>
                            <span class="carga-valor" id="cargaLeve">20.0</span>
                        </div>
                        <div class="carga-item">
                            <span class="carga-tipo">Média:</span>
                            <span class="carga-valor" id="cargaMedia">30.0</span>
                        </div>
                        <div class="carga-item">
                            <span class="carga-tipo">Pesada:</span>
                            <span class="carga-valor" id="cargaPesada">60.0</span>
                        </div>
                        <div class="carga-item">
                            <span class="carga-tipo">Muito Pesada:</span>
                            <span class="carga-valor" id="cargaMuitoPesada">100.0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

          <!-- CARACTERÍSTICAS -->
<div class="tab-pane" id="caracteristicas">
    <h3 class="tab-title">Características</h3>
    
    <div class="caracteristicas-completo">
        
        <!-- ==================== -->
        <!-- SEÇÃO 1: APARÊNCIA E RIQUEZA -->
        <!-- ==================== -->
        <div class="dashboard-section">
            <div class="section-header">
                <i class="fas fa-chess-queen"></i>
                <h4>Aparência e Riqueza</h4>
                <span class="section-pontos" id="totalSecao1">0 pts</span>
            </div>
            
            <div class="aparencia-riqueza-grid">
                <!-- CARD APARÊNCIA -->
                <div class="caracteristica-card">
                    <div class="caracteristica-header">
                        <i class="fas fa-user"></i>
                        <h5>Aparência Física</h5>
                        <span class="pontos-badge" id="pontosAparencia">0 pts</span>
                    </div>
                    <div class="caracteristica-content">
                        <div class="select-group">
                            <label for="nivelAparencia">Nível de Aparência:</label>
                            <select id="nivelAparencia" class="dashboard-select">
                                <option value="-24">Horrendo [-24 pts]</option>
                                <option value="-20">Monstruoso [-20 pts]</option>
                                <option value="-16">Hediondo [-16 pts]</option>
                                <option value="-8">Feio [-8 pts]</option>
                                <option value="-4">Sem Atrativos [-4 pts]</option>
                                <option value="0" selected>Comum [0 pts]</option>
                                <option value="4">Atraente [+4 pts]</option>
                                <option value="12">Elegante [+12 pts]</option>
                                <option value="16">Muito Elegante [+16 pts]</option>
                                <option value="20">Lindo [+20 pts]</option>
                            </select>
                        </div>
                        <div class="info-display" id="displayAparencia">
                            <strong>Comum</strong>
                            <br><small>Reação: +0 | Aparência padrão</small>
                        </div>
                    </div>
                </div>
                
                <!-- CARD RIQUEZA -->
                <div class="caracteristica-card">
                    <div class="caracteristica-header">
                        <i class="fas fa-coins"></i>
                        <h5>Nível de Riqueza</h5>
                        <span class="pontos-badge" id="pontosRiqueza">0 pts</span>
                    </div>
                    <div class="caracteristica-content">
                        <div class="select-group">
                            <label for="nivelRiqueza">Nível de Riqueza:</label>
                            <select id="nivelRiqueza" class="dashboard-select">
                                <option value="-25">Falido [-25 pts]</option>
                                <option value="-15">Pobre [-15 pts]</option>
                                <option value="-10">Batalhador [-10 pts]</option>
                                <option value="0" selected>Médio [0 pts]</option>
                                <option value="10">Confortável [+10 pts]</option>
                                <option value="20">Rico [+20 pts]</option>
                                <option value="30">Muito Rico [+30 pts]</option>
                                <option value="50">Podre de Rico [+50 pts]</option>
                            </select>
                        </div>
                        <div class="info-display" id="displayRiqueza">
                            <strong>Médio</strong>
                            <br><small>Multiplicador: 1x | Recursos padrão</small>
                        </div>
                        <div class="renda-info">
                            <small>Renda Mensal Estimada: <span id="rendaMensal">$1.000</span></small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ==================== -->
        <!-- SEÇÃO 2: IDIOMAS -->
        <!-- ==================== -->
        <div class="dashboard-section">
            <div class="section-header">
                <i class="fas fa-globe-americas"></i>
                <h4>Idiomas</h4>
                <span class="section-pontos" id="totalSecao2">0 pts</span>
            </div>
            
            <div class="idiomas-container">
                <!-- ALFABETIZAÇÃO -->
                <div class="alfabetizacao-section">
                    <h5>Alfabetização</h5>
                    <div class="alfabetizacao-options">
                        <label class="option-label">
                            <input type="radio" name="alfabetizacao" value="0" checked>
                            <span class="option-content">
                                <strong>Alfabetizado</strong>
                                <small>0 pts | Lê e escreve normalmente</small>
                            </span>
                        </label>
                        
                        <label class="option-label">
                            <input type="radio" name="alfabetizacao" value="-2">
                            <span class="option-content">
                                <strong>Semialfabetizado</strong>
                                <small>-2 pts | Lê com dificuldade, escreve pouco</small>
                            </span>
                        </label>
                        
                        <label class="option-label">
                            <input type="radio" name="alfabetizacao" value="-3">
                            <span class="option-content">
                                <strong>Analfabeto</strong>
                                <small>-3 pts | Não lê nem escreve</small>
                            </span>
                        </label>
                    </div>
                </div>
                
                <!-- IDIOMA MATERNO -->
                <div class="idioma-materno-section">
                    <h5>Idioma Materno</h5>
                    <div class="idioma-materno">
                        <input type="text" id="idiomaMaternoNome" value="Comum" 
                               class="dashboard-input" placeholder="Nome do idioma">
                        <span class="nivel-badge">Nativo (0 pts)</span>
                    </div>
                </div>
                
                <!-- ADICIONAR IDIOMA -->
                <div class="add-idioma-section">
                    <h5>Adicionar Idioma</h5>
                    <div class="add-idioma-form">
                        <div class="form-row">
                            <input type="text" id="novoIdiomaNome" 
                                   class="dashboard-input" 
                                   placeholder="Nome do idioma (ex: Élfico, Anão)">
                        </div>
                        
                        <div class="form-row dois-campos">
                            <div class="campo-group">
                                <label for="novoIdiomaFala">🗣️ Fala:</label>
                                <select id="novoIdiomaFala" class="dashboard-select">
                                    <option value="0">Nenhum (0 pts)</option>
                                    <option value="2" selected>Rudimentar (2 pts)</option>
                                    <option value="4">Sotaque (4 pts)</option>
                                    <option value="6">Nativo (6 pts)</option>
                                </select>
                            </div>
                            
                            <div class="campo-group">
                                <label for="novoIdiomaEscrita">✍️ Escrita:</label>
                                <select id="novoIdiomaEscrita" class="dashboard-select">
                                    <option value="0" selected>Nenhum (0 pts)</option>
                                    <option value="1">Rudimentar (1 pt)</option>
                                    <option value="2">Sotaque (2 pts)</option>
                                    <option value="3">Nativo (3 pts)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row acoes">
                            <div class="custo-preview">
                                Custo total: <span id="custoIdiomaPreview">+2 pts</span>
                            </div>
                            <button id="btnAdicionarIdioma" class="btn-medieval">
                                <i class="fas fa-plus-circle"></i> Adicionar Idioma
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- LISTA DE IDIOMAS -->
                <div class="lista-idiomas-section">
                    <h5>Idiomas Adicionais <small>(<span id="totalIdiomas">0</span> idiomas)</small></h5>
                    <div id="listaIdiomasAdicionais" class="idiomas-lista">
                        <div class="empty-state">
                            <i class="fas fa-language"></i>
                            <p>Nenhum idioma adicional adicionado</p>
                            <small>Adicione idiomas acima</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ==================== -->
        <!-- SEÇÃO 3: CARACTERÍSTICAS FÍSICAS (ESCOLHER) -->
        <!-- ==================== -->
        <div class="dashboard-section">
            <div class="section-header">
                <i class="fas fa-weight-hanging"></i>
                <h4>Características Físicas</h4>
                <span class="section-pontos" id="totalSecao3">0 pts</span>
            </div>
            
            <div class="caracteristicas-escolha-container">
                <div class="caracteristicas-grid">
                    <!-- MAGRO -->
                    <div class="caracteristica-opcao" data-tipo="magro" data-pontos="-5">
                        <div class="opcao-header">
                            <i class="fas fa-user-minus"></i>
                            <h6>Magro</h6>
                        </div>
                        <div class="opcao-content">
                            <span class="opcao-pontos">-5 pts</span>
                            <small>Peso: 67% do normal</small>
                            <button class="btn-opcao">
                                <i class="fas fa-plus"></i> Adicionar
                            </button>
                        </div>
                    </div>
                    
                    <!-- ACIMA DO PESO -->
                    <div class="caracteristica-opcao" data-tipo="acima-peso" data-pontos="-1">
                        <div class="opcao-header">
                            <i class="fas fa-user"></i>
                            <h6>Acima do Peso</h6>
                        </div>
                        <div class="opcao-content">
                            <span class="opcao-pontos">-1 pt</span>
                            <small>Peso: 130% do normal</small>
                            <button class="btn-opcao">
                                <i class="fas fa-plus"></i> Adicionar
                            </button>
                        </div>
                    </div>
                    
                    <!-- GORDO -->
                    <div class="caracteristica-opcao" data-tipo="gordo" data-pontos="-3">
                        <div class="opcao-header">
                            <i class="fas fa-user-friends"></i>
                            <h6>Gordo</h6>
                        </div>
                        <div class="opcao-content">
                            <span class="opcao-pontos">-3 pts</span>
                            <small>Peso: 150% do normal</small>
                            <button class="btn-opcao">
                                <i class="fas fa-plus"></i> Adicionar
                            </button>
                        </div>
                    </div>
                    
                    <!-- MUITO GORDO -->
                    <div class="caracteristica-opcao" data-tipo="muito-gordo" data-pontos="-5">
                        <div class="opcao-header">
                            <i class="fas fa-user-injured"></i>
                            <h6>Muito Gordo</h6>
                        </div>
                        <div class="opcao-content">
                            <span class="opcao-pontos">-5 pts</span>
                            <small>Peso: 200% do normal</small>
                            <button class="btn-opcao">
                                <i class="fas fa-plus"></i> Adicionar
                            </button>
                        </div>
                    </div>
                    
                    <!-- NANISMO -->
                    <div class="caracteristica-opcao" data-tipo="nanismo" data-pontos="-15">
                        <div class="opcao-header">
                            <i class="fas fa-arrow-down"></i>
                            <h6>Nanismo</h6>
                        </div>
                        <div class="opcao-content">
                            <span class="opcao-pontos">-15 pts</span>
                            <small>MT -1, -1 Deslocamento</small>
                            <button class="btn-opcao">
                                <i class="fas fa-plus"></i> Adicionar
                            </button>
                        </div>
                    </div>
                    
                    <!-- GIGANTISMO -->
                    <div class="caracteristica-opcao" data-tipo="gigantismo" data-pontos="0">
                        <div class="opcao-header">
                            <i class="fas fa-arrow-up"></i>
                            <h6>Gigantismo</h6>
                        </div>
                        <div class="opcao-content">
                            <span class="opcao-pontos">0 pts</span>
                            <small>MT +1, +1 Deslocamento</small>
                            <button class="btn-opcao">
                                <i class="fas fa-plus"></i> Adicionar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ==================== -->
        <!-- SEÇÃO 4: CARACTERÍSTICAS SELECIONADAS (NOVA!) -->
        <!-- ==================== -->
        <div class="dashboard-section" id="selecionadasSection" style="display: none;">
            <div class="section-header">
                <i class="fas fa-list-check"></i>
                <h4>Características Selecionadas</h4>
            </div>
            
            <div id="caracteristicasSelecionadas" class="selecionadas-container">
                <!-- Dinâmico - JavaScript irá preencher -->
            </div>
        </div>
        
        <!-- ==================== -->
        <!-- SEÇÃO 5: ALTURA, PESO E DESVANTAGENS -->
        <!-- ==================== -->
        <div class="dashboard-section">
            <div class="section-header">
                <i class="fas fa-ruler-combined"></i>
                <h4>Altura, Peso e Desvantagens</h4>
                <span class="status-badge" id="statusFisico">Normal</span>
            </div>
            
            <div class="altura-peso-container">
                <div class="altura-peso-grid">
                    <!-- ALTURA -->
                    <div class="fisica-card">
                        <div class="fisica-header">
                            <i class="fas fa-ruler-vertical"></i>
                            <h5>Altura</h5>
                        </div>
                        <div class="fisica-content">
                            <div class="controle-numerico">
                                <button class="btn-controle" onclick="ajustarAltura(-0.01)">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <input type="number" id="altura" value="1.70" step="0.01" 
                                       min="1.30" max="2.50" class="fisica-input">
                                <button class="btn-controle" onclick="ajustarAltura(0.01)">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                            <div class="status-display" id="statusAltura">
                                <span class="status-text">Normal</span>
                                <span class="status-desc">Faixa padrão</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- PESO -->
                    <div class="fisica-card">
                        <div class="fisica-header">
                            <i class="fas fa-weight"></i>
                            <h5>Peso</h5>
                        </div>
                        <div class="fisica-content">
                            <div class="controle-numerico">
                                <button class="btn-controle" onclick="ajustarPeso(-1)">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <input type="number" id="peso" value="70" step="1" 
                                       min="30" max="200" class="fisica-input">
                                <button class="btn-controle" onclick="ajustarPeso(1)">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                            <div class="status-display" id="statusPeso">
                                <span class="status-text">Normal</span>
                                <span class="status-desc">Faixa padrão</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- INFO ST BASE -->
                <div class="st-info-card">
                    <div class="st-header">
                        <i class="fas fa-fist-raised"></i>
                        <h5>Força (ST) Base</h5>
                    </div>
                    <div class="st-content">
                        <div class="st-value">
                            <span id="stBase">10</span>
                            <small>ST Base</small>
                        </div>
                        <div class="st-faixas">
                            <div class="faixa-item">
                                <span>Faixa de Altura:</span>
                                <strong id="alturaFaixa">1.58m - 1.83m</strong>
                            </div>
                            <div class="faixa-item">
                                <span>Faixa de Peso:</span>
                                <strong id="pesoFaixa">57.5kg - 87.5kg</strong>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- DESVANTAGENS ATIVAS -->
                <div class="desvantagens-card" id="desvantagensAtivas" style="display: none;">
                    <div class="desvantagens-header">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h5>Desvantagens Físicas Ativas</h5>
                    </div>
                    <div id="listaDesvantagens" class="desvantagens-lista">
                        <!-- Dinâmico - JavaScript irá preencher -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ==================== -->
        <!-- RESUMO DE PONTOS DA ABA -->
        <!-- ==================== -->
        <div class="dashboard-section">
            <div class="section-header">
                <i class="fas fa-calculator"></i>
                <h4>Resumo de Pontos - Características</h4>
            </div>
            
            <div class="resumo-caracteristicas">
                <div class="resumo-grid">
                    <div class="resumo-item">
                        <span class="resumo-label">Aparência:</span>
                        <span class="resumo-valor" id="resumoAparencia">0 pts</span>
                    </div>
                    <div class="resumo-item">
                        <span class="resumo-label">Riqueza:</span>
                        <span class="resumo-valor" id="resumoRiqueza">0 pts</span>
                    </div>
                    <div class="resumo-item">
                        <span class="resumo-label">Idiomas:</span>
                        <span class="resumo-valor" id="resumoIdiomas">0 pts</span>
                    </div>
                    <div class="resumo-item">
                        <span class="resumo-label">Características Físicas:</span>
                        <span class="resumo-valor" id="resumoCaracteristicas">0 pts</span>
                    </div>
                </div>
                
                <div class="resumo-total">
                    <span class="total-label">Total Gasto em Características:</span>
                    <span class="total-valor" id="totalCaracteristicas">0 pts</span>
                </div>
            </div>
        </div>
        
    </div>
</div>

            <!-- VANTAGENS/DESVANTAGENS -->
            <div class="tab-pane" id="vantagens">
                <h3 class="tab-title">Vantagens & Desvantagens</h3>
                <div class="tab-placeholder">
                    <i class="fas fa-balance-scale"></i>
                    <p>Selecione vantagens para seu personagem.</p>
                    <p>Escolha desvantagens (opcional) para ganhar mais pontos.</p>
                    <p>Total de pontos gastos: 0/0</p>
                </div>
            </div>

            <!-- PERÍCIAS -->
            <div class="tab-pane" id="pericias">
                <h3 class="tab-title">Perícias & Técnicas</h3>
                <div class="tab-placeholder">
                    <i class="fas fa-bullseye"></i>
                    <p>Perícias de combate, sociais, conhecimento, etc.</p>
                    <p>Técnicas especiais e especializações.</p>
                    <p>Níveis de habilidade e custos em pontos.</p>
                </div>
            </div>

            <!-- MAGIAS -->
            <div class="tab-pane" id="magias">
                <h3 class="tab-title">Magias & Poderes</h3>
                <div class="tab-placeholder">
                    <i class="fas fa-hat-wizard"></i>
                    <p>Escolas de magia e feitiços conhecidos.</p>
                    <p>Poderes psíquicos, habilidades sobrenaturais.</p>
                    <p>Custos de mana e limitações mágicas.</p>
                </div>
            </div>

            <!-- COMBATE -->
            <div class="tab-pane" id="combate">
                <h3 class="tab-title">Estatísticas de Combate</h3>
                <div class="tab-placeholder">
                    <i class="fas fa-fist-raised"></i>
                    <p>Valor de Defesa (VD), Esquiva, Bloqueio, Aparar.</p>
                    <p>Ataques básicos, dano, alcance.</p>
                    <p>Armaduras e proteções.</p>
                </div>
            </div>

            <!-- EQUIPAMENTOS -->
            <div class="tab-pane" id="equipamentos">
                <h3 class="tab-title">Equipamento & Inventário</h3>
                <div class="tab-placeholder">
                    <i class="fas fa-backpack"></i>
                    <p>Armas, armaduras, equipamentos de aventura.</p>
                    <p>Itens mágicos, poções, ferramentas.</p>
                    <p>Peso total e capacidade de carga.</p>
                </div>
            </div>

            <!-- RESUMO -->
            <div class="tab-pane" id="resumo">
                <h3 class="tab-title">Resumo do Personagem</h3>
                <div class="tab-placeholder">
                    <i class="fas fa-scroll"></i>
                    <p>Resumo completo de todas as informações.</p>
                    <p>Pontuação total e verificação de regras.</p>
                    <p>Pronto para salvar e usar em campanhas!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- NAVIGATION BUTTONS -->
    <div class="navigation-buttons">
        <button onclick="previousTab()" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Anterior
        </button>
        
        <button onclick="saveCharacter()" class="btn btn-save">
            <i class="fas fa-save"></i> Salvar Personagem
        </button>
        
        <button onclick="nextTab()" class="btn btn-primary">
            Próximo <i class="fas fa-arrow-right"></i>
        </button>
    </div>

    <!-- FOOTER -->
    <footer class="footer">
        <p>© 2024 GURPS Tool - Criação de Personagem</p>
        <p style="color: var(--wood-light); font-size: 0.9rem; margin-top: 10px;">
            GURPS é uma marca registrada da Steve Jackson Games
        </p>
    </footer>
   <!-- Scripts DEVEM vir nesta ordem: -->
<script src="caracteristicas-aparencia.js"></script>
<script src="dashboard.js"></script>
<script src="atributos.js"></script>

    <script>
    // ===========================================
    // INICIALIZAÇÃO DO FIREBASE
    // ===========================================
    let app, auth, db;
    
    if (typeof firebase !== 'undefined' && firebase.apps.length > 0) {
        app = firebase.app();
        auth = firebase.auth();
        db = firebase.firestore();
    } else {
        const firebaseConfig = {
            apiKey: "AIzaSyBoTP0oJH4q3yrc0N8sCv9ynKN53dN-UbU",
            authDomain: "gurpsroll.firebaseapp.com",
            projectId: "gurpsroll"
        };
        
        app = firebase.initializeApp(firebaseConfig);
        auth = firebase.auth();
        db = firebase.firestore();
    }
    
    // ===========================================
    // VARIÁVEIS GLOBAIS
    // ===========================================
    let currentUser = null;
    let currentTabIndex = 0;
    const tabs = ['dashboard', 'atributos', 'caracteristicas', 'vantagens', 'pericias', 'magias', 'combate', 'equipamentos', 'resumo'];
    
    // ===========================================
    // INICIALIZAÇÃO DA PÁGINA
    // ===========================================
    document.addEventListener('DOMContentLoaded', function() {
        initPage();
        initTabs();
    });
    
    async function initPage() {
        showLoading();
        
        // Verifica autenticação
        auth.onAuthStateChanged(async (user) => {
            if (user) {
                currentUser = user;
                await loadUserData();
                hideLoading();
                
                // Verifica se está editando um personagem existente
                const urlParams = new URLSearchParams(window.location.search);
                const editCharacterId = urlParams.get('edit');
                if (editCharacterId) {
                    loadCharacterForEdit(editCharacterId);
                }
            } else {
                // Não autenticado - redireciona
                showToast('Faça login para criar personagens', 'error');
                setTimeout(() => {
                    window.location.href = 'login.html';
                }, 1500);
            }
        });
    }
    
    // ===========================================
    // CARREGAR DADOS DO USUÁRIO
    // ===========================================
    async function loadUserData() {
        try {
            const userDoc = await db.collection('player_profiles').doc(currentUser.uid).get();
            
            if (userDoc.exists) {
                const data = userDoc.data();
                document.getElementById('playerCode').textContent = data.player_code || 'N/A';
            }
        } catch (error) {
            console.error('Erro ao carregar dados:', error);
        }
    }
    
    // ===========================================
    // SISTEMA DE ABAS
    // ===========================================
    function initTabs() {
        const tabButtons = document.querySelectorAll('.tab-btn');
        
        tabButtons.forEach(button => {
            button.addEventListener('click', function() {
                const tabId = this.getAttribute('data-tab');
                switchTab(tabId);
            });
        });
    }
    
    function switchTab(tabId) {
        // Remove classe active de todas as abas
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        
        document.querySelectorAll('.tab-pane').forEach(pane => {
            pane.classList.remove('active');
        });
        
        // Adiciona classe active à aba selecionada
        document.querySelector(`.tab-btn[data-tab="${tabId}"]`).classList.add('active');
        document.getElementById(tabId).classList.add('active');
        
        // Atualiza índice da aba atual
        currentTabIndex = tabs.indexOf(tabId);
    }
    
    function nextTab() {
        if (currentTabIndex < tabs.length - 1) {
            currentTabIndex++;
            switchTab(tabs[currentTabIndex]);
        }
    }
    
    function previousTab() {
        if (currentTabIndex > 0) {
            currentTabIndex--;
            switchTab(tabs[currentTabIndex]);
        }
    }
    
    // ===========================================
    // CARREGAR PERSONAGEM PARA EDIÇÃO
    // ===========================================
    async function loadCharacterForEdit(characterId) {
        try {
            showLoading();
            const characterDoc = await db.collection('characters').doc(characterId).get();
            
            if (characterDoc.exists) {
                const characterData = characterDoc.data();
                
                // Preenche o nome do personagem
                if (characterData.name) {
                    document.getElementById('characterName').value = characterData.name;
                }
                
                showToast('Personagem carregado para edição', 'success');
            } else {
                showToast('Personagem não encontrado', 'error');
            }
            
            hideLoading();
        } catch (error) {
            console.error('Erro ao carregar personagem:', error);
            showToast('Erro ao carregar personagem', 'error');
            hideLoading();
        }
    }
    
    // ===========================================
    // SALVAR PERSONAGEM
    // ===========================================
    async function saveCharacter() {
        const characterName = document.getElementById('characterName').value.trim();
        
        if (!characterName) {
            showToast('Digite um nome para o personagem', 'error');
            document.getElementById('characterName').focus();
            return;
        }
        
        try {
            showLoading();
            
            const characterData = {
                name: characterName,
                player_id: currentUser.uid,
                player_code: document.getElementById('playerCode').textContent,
                created_at: new Date().toISOString(),
                updated_at: new Date().toISOString(),
                is_active: true,
                status: 'rascunho',
                // Aqui serão adicionados os dados das abas posteriormente
                attributes: {},
                characteristics: {},
                advantages: [],
                disadvantages: [],
                skills: [],
                spells: [],
                combat_stats: {},
                equipment: []
            };
            
            // Verifica se está editando ou criando novo
            const urlParams = new URLSearchParams(window.location.search);
            const editCharacterId = urlParams.get('edit');
            
            if (editCharacterId) {
                // Atualiza personagem existente
                await db.collection('characters').doc(editCharacterId).update({
                    ...characterData,
                    updated_at: new Date().toISOString()
                });
                
                showToast('Personagem atualizado com sucesso!', 'success');
                setTimeout(() => {
                    window.location.href = 'modo-personagem.html';
                }, 1500);
            } else {
                // Cria novo personagem
                await db.collection('characters').add(characterData);
                
                showToast('Personagem criado com sucesso!', 'success');
                setTimeout(() => {
                    window.location.href = 'modo-personagem.html';
                }, 1500);
            }
            
        } catch (error) {
            console.error('Erro ao salvar personagem:', error);
            showToast('Erro ao salvar personagem', 'error');
            hideLoading();
        }
    }
    
    // ===========================================
    // FUNÇÕES UTILITÁRIAS
    // ===========================================
    async function logout() {
        try {
            showLoading();
            await auth.signOut();
            showToast('Desconectado com sucesso', 'success');
            setTimeout(() => {
                window.location.href = 'login.html';
            }, 1000);
        } catch (error) {
            hideLoading();
            showToast('Erro ao sair', 'error');
        }
    }
    
    function showToast(message, type = 'info') {
        const toast = document.getElementById('toast');
        toast.innerHTML = message;
        toast.className = 'toast ' + type;
        toast.style.display = 'block';
        
        setTimeout(() => {
            toast.style.animation = 'slideOut 0.3s ease';
            setTimeout(() => {
                toast.style.display = 'none';
                toast.style.animation = '';
            }, 300);
        }, 3000);
    }
    
    function showLoading() {
        document.getElementById('loadingOverlay').style.display = 'flex';
    }
    
    function hideLoading() {
        document.getElementById('loadingOverlay').style.display = 'none';
    }
    
    // ===========================================
    // HOTKEYS
    // ===========================================
    document.addEventListener('keydown', function(e) {
        // Ctrl+S - Salvar
        if (e.ctrlKey && e.key === 's') {
            e.preventDefault();
            saveCharacter();
        }
        // Ctrl+→ - Próxima aba
        if (e.ctrlKey && e.key === 'ArrowRight') {
            e.preventDefault();
            nextTab();
        }
        // Ctrl+← - Aba anterior
        if (e.ctrlKey && e.key === 'ArrowLeft') {
            e.preventDefault();
            previousTab();
        }
        // Escape - Voltar
        if (e.key === 'Escape') {
            window.location.href = 'modo-personagem.html';
        }
    });
    </script>

</body>
</html>