<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GURPS Tool - Entrar na Taverna</title>
    <!-- (Mesmos estilos e links da página de cadastro) -->
    <style>
        /* Estilos idênticos à página de cadastro - para manter consistência */
        :root { --primary-dark: #1a1200; --secondary-dark: #2c2008; --primary-gold: #d4af37; /* ... */ }
        body { font-family: 'Cinzel', serif; background-color: var(--primary-dark); color: var(--text-light); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .auth-container { background: linear-gradient(145deg, rgba(44, 32, 8, 0.95), rgba(26, 18, 0, 0.95)); padding: 40px; border-radius: 15px; border: 3px solid var(--wood-dark); box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7); width: 100%; max-width: 450px; text-align: center; }
        .auth-title { font-family: 'Uncial Antiqua', cursive; color: var(--primary-gold); font-size: 2.5rem; margin-bottom: 10px; }
        /* ... (copiar todos os estilos do cadastro.html) ... */
    </style>
</head>
<body>
    <div class="auth-container">
        <h1 class="auth-title">Entrar na Taverna</h1>
        <p class="auth-subtitle">Acesse sua conta para continuar sua aventura</p>
        
        <form id="loginForm">
            <div class="form-group">
                <label for="email"><i class="fas fa-envelope"></i> E-mail do Aventureiro</label>
                <input type="email" id="email" class="form-control" required placeholder="seu@email.com">
            </div>
            <div class="form-group">
                <label for="password"><i class="fas fa-lock"></i> Senha Secreta</label>
                <input type="password" id="password" class="form-control" required placeholder="Digite sua senha">
            </div>
            
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-dungeon"></i> Entrar na Taverna
            </button>
            
            <div id="message" class="message"></div>
        </form>
        
        <div class="auth-links">
            <p>Novo por aqui? <a href="cadastro.html">Forje sua Lenda</a></p>
            <p><a href="index.html"><i class="fas fa-arrow-left"></i> Voltar ao Início</a></p>
        </div>
    </div>

    <script>
        // Configuração do Supabase (mesma do cadastro)
        const supabaseUrl = 'https://jpskjtrdezdurwufxeco.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impwc2tqdHJkZXpkdXJ3dWZ4ZWNvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYzNDA0MjIsImV4cCI6MjA4MTkxNjQyMn0.L35uibFfjLEhgbq_VPXmy9nUNQbjd4aMsgAyPn3zBhU';
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        // Manipular o login
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const messageEl = document.getElementById('message');
            
            messageEl.style.display = 'none';
            
            try {
                // Fazer login com e-mail e senha[citation:3]
                const { data, error } = await supabase.auth.signInWithPassword({
                    email,
                    password
                });
                
                if (error) throw error;
                
                // Sucesso - redirecionar para home
                messageEl.textContent = 'Login realizado! Redirecionando para sua aventura...';
                messageEl.className = 'message success';
                messageEl.style.display = 'block';
                
                setTimeout(() => {
                    window.location.href = 'home.html';
                }, 1500);
                
            } catch (error) {
                messageEl.textContent = `Erro: ${error.message}`;
                messageEl.className = 'message error';
                messageEl.style.display = 'block';
                console.error('Erro no login:', error);
            }
        });
    </script>
</body>
</html>